<llpackages>
	<package 
		name="VirtualBox"
		version="5.1.4"
		class="user"
		install="destdir">
		<license>GPLv2</license>
		<sources>
			<file>                                                                        
				<pkg sha1="e9d96a9fb55ab17b343a95447c48069f5da8840d">VirtualBox-5.1.4.tar.bz2</pkg>
				<mirror>http://download.virtualbox.org/virtualbox/5.1.4/</mirror>
			</file>
			<file>                                                                        
				<pkg sha1="98ee451bdda51736d279c5655101145f9ff364ac">open-watcom-c-linux-1.9</pkg>
				<mirror>http://ftp.heanet.ie/pub/openwatcom/</mirror>
			</file>
			<manualcheck date="20160822" interval="120" page="http://www.virtualbox.org/" />
			<!-- <check>
				<page html="http://dlc-cdn.sun.com/virtualbox/">
					<atext linktext="4.3.43" />
					<atext linktext="4.3.37" />
					<atext linktext="4.3.38" />
					<atext linktext="4.3.39" />
					<atext linktext="4.3.40" />
					<atext linktext="4.3.41" />
					<atext linktext="4.3.42" />
					<atext linktext="4.4." />
					<atext linktext="4.5." />
					<atext linktext="5.0.0/" />
					<atext linktext="5.0." />
					<atext linktext="5.1." />
				</page>
			</check> -->
		</sources>
		<builddeps>
                        <dep>Linux-PAM</dep>
                        <dep>Mesa</dep>
                        <dep>Python</dep>
                        <dep>SDL</dep>
                        <dep>alsa-lib</dep>
                        <dep>bash</dep>
                        <dep>binutils</dep>
                        <dep>cdrkit</dep>
                        <dep>coreutils</dep>
                        <dep>curl</dep>
                        <dep>device-mapper</dep>
                        <dep>gcc</dep>
                        <dep>glib</dep>
                        <dep>glibc</dep>
                        <dep>glu</dep>
                        <dep>grep</dep>
                        <dep>grub-legacy</dep>
                        <dep>gzip</dep>
                        <dep>iasl</dep>
                        <dep>libICE</dep>
                        <dep>libIDL</dep>
                        <dep>libSM</dep>
                        <dep>libX11</dep>
                        <dep>libXcursor</dep>
                        <dep>libXext</dep>
                        <dep>libXinerama</dep>
                        <dep>libXmu</dep>
                        <dep>libXrandr</dep>
                        <dep>libXrender</dep>
                        <dep>libXt</dep>
                        <dep>libcap</dep>
                        <dep>libpng15</dep><dep>libpng16</dep>
                        <dep>libvpx</dep>
                        <dep>libxml2</dep>
                        <dep>libxslt</dep>
                        <dep>linux_headers</dep>
                        <dep>makeself</dep>
                        <dep>openssl</dep>
                        <dep>perl</dep>
                        <dep>pkg-config</dep>
                        <dep>pygobject</dep>
                        <dep>qt5</dep>
                        <dep>sed</dep>
                        <dep>subversion</dep>
                        <dep>which</dep>
                        <dep>xproto-base</dep>
                        <dep>zlib</dep>
			<dep>gcc61</dep>
                </builddeps>
		<unpack>
			<![CDATA[ 
			tar xjf ${SRCDIR}/${PKGNAME}-${PKGVERSION}.tar.bz2
			install -m 0755 ${SRCDIR}/open-watcom-c-linux-1.9 ./
			]]>
		</unpack>
		<build>
			<![CDATA[
			export PATH=/usr/local/gcc61/bin:$PATH 
			export CC="/usr/local/gcc61/bin/gcc61"
			export CXX="/usr/local/gcc61/bin/g++61"
			export USER=root
			OWPWD=` pwd ` 
			ls -lah
			echo $OWPWD
			./open-watcom-c-linux-1.9 -i -dDstDir=${OWPWD}/ow19 -dFullInstall=1
			ls -lah
			cd ${PKGNAME}-${PKGVERSION}
			jobcount=2
			#if [ -n "$DISTCC_POTENTIAL_HOSTS"  ] ;  then 
			#	DISTCC_HOSTS="$DISTCC_POTENTIAL_HOSTS" 
			#	export DISTCC_HOSTS
			#	jobcount=` expr $DISTCC_HOSTCOUNT '*' 3 `
			#	export CC="distcc /usr/local/gcc61/bin/gcc61"
			#	export CXX="distcc /usr/local/gcc61/bin/g++61" 
			#	./configure --with-ow-dir=${OWPWD}/ow19 --disable-hardening \
			#		--disable-java --disable-python --disable-pulse --disable-kmods --disable-docs \
			#		--with-gcc="distcc /usr/local/gcc61/bin/gcc61" --with-g++="distcc /usr/local/gcc61/bin/g++61"
			#else
				./configure --with-ow-dir=${OWPWD}/ow19 --disable-hardening \
					--disable-java --disable-python --disable-pulse --disable-kmods --disable-docs \
					--with-gcc="/usr/local/gcc61/bin/gcc61" --with-g++="/usr/local/gcc61/bin/g++61"
			#fi
			source env.sh
			kmk
			]]>
		</build>
		<test />
		<install>
			<![CDATA[
			mkdir -p ${TGTDIR}/usr/local/${PKGNAME}-${PKGVERSION}
			ln -s ${PKGNAME}-${PKGVERSION} ${TGTDIR}/usr/local/${PKGNAME} 
			tar -C ${PKGNAME}-${PKGVERSION}/out/linux.x86/release/bin -cf - . | tar -C ${TGTDIR}/usr/local/${PKGNAME}-${PKGVERSION} -xf - 		
			]]>
		</install>
		<clean>
			<![CDATA[
			rm -rf ${PKGNAME}-${PKGVERSION}
			rm -rf ow19
			rm open-watcom-c-linux-1.9
			]]>
		</clean>
	</package>
</llpackages>
